<!DOCTYPE html>
<html>
<head>
    <title>REST API Client</title>
</head>
<body>
    <h1>REST API Client</h1>
    <button id="create">Create Issue</button>
    <button id="read">Read Issue</button>
    <button id="update">Update Issue</button>
    <button id="delete">Delete Issue</button>
    <div id="output"></div>

    <script>
        const apiUrl = 'http://localhost/sitemate/sitemate/server.php'; // Replace with the URL of your server

        document.getElementById('create').addEventListener('click', function () {
            const description = prompt('Enter the issue description:');
            if (description !== null && description !== '') {
                const data = { description: description };
                fetch(apiUrl, {
                    method: 'POST',
                    body: JSON.stringify(data),
                    headers: {
                        'Content-Type': 'application/json'
                    }
                })
                .then(response => response.json())
                .then(data => {
                    document.getElementById('output').textContent = data.message;
                });
            }
        });

        document.getElementById('read').addEventListener('click', function () {
            const action = 'read'; // You can change this to 'delete' or 'update' as needed
            const id = prompt('Enter the issue id:');

            if (isNaN(id) || id <= 0) {
                document.getElementById('output').textContent = "Please enter a valid issue ID.";
            } else {
                const apiUrl = `http://localhost/sitemate/sitemate/server.php?action=${action}&id=${id}`; // Replace with your server URL

                fetch(apiUrl, {
                    method: 'GET',
                })
                .then(response => response.json())
                .then(data => {
                    if (data.message) {
                        document.getElementById('output').textContent = data.message;
                    } else {
                        document.getElementById('output').textContent = `Issue ID: ${data.id}, Description: ${data.description}`;
                    }
                })
                .catch(error => {
                    document.getElementById('output').textContent = "Error: " + error;
                });
            }
        });

        document.getElementById('update').addEventListener('click', function () {
            const action = 'update'; // You can change this to 'delete' or 'update' as needed
            const id = prompt('Enter the issue id:');
            const description = prompt('Enter the issue description:');

            if (isNaN(id) || id <= 0) {
                document.getElementById('output').textContent = "Please enter a valid issue ID.";
            } else {
                const apiUrl = `http://localhost/sitemate/sitemate/server.php?action=${action}&id=${id}&description=${description}`; 

                fetch(apiUrl, {
                    method: 'PUT',
                })
                .then(response => response.json())
                .then(data => {
                    if (data.message) {
                        document.getElementById('output').textContent = data.message;
                    } else {
                        document.getElementById('output').textContent = `Issue ID: ${data.id}, Description: ${data.description}`;
                    }
                })
                .catch(error => {
                    document.getElementById('output').textContent = "Error: " + error;
                });
            }
        });

        document.getElementById('delete').addEventListener('click', function () {
            const action = 'delete'; // You can change this to 'delete' or 'update' as needed
            const id = prompt('Enter the issue id:');

            if (isNaN(id) || id <= 0) {
                document.getElementById('output').textContent = "Please enter a valid issue ID.";
            } else {
                const apiUrl = `http://localhost/sitemate/sitemate/server.php?action=${action}&id=${id}`; // Replace with your server URL

                fetch(apiUrl, {
                    method: 'DELETE',
                })
                .then(response => response.json())
                .then(data => {
                    if (data.message) {
                        document.getElementById('output').textContent = data.message;
                    } else {
                        document.getElementById('output').textContent = `Issue ID: ${data.id}, Description: ${data.description}`;
                    }
                })
                .catch(error => {
                    document.getElementById('output').textContent = "Error: " + error;
                });
            }
        });
    </script>
</body>
</html>
